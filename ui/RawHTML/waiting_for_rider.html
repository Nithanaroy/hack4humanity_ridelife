<html>

<head>
    <link href="bootstrap-3.2.0-dist/css/bootstrap.min.css" type="text/css" rel="stylesheet" />

    <script src="jquery-2.1.1.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.1.0.js"></script>

    <script type="text/javascript">
    $(function() {

        var socket = io("http://10.143.179.16:3000/");

        // Driver is assigned, show a screen displayng the driver details
        socket.on('assigned_driver', function(driver) {
            driver = JSON.parse(driver);
            console.log(driver);
            $("#driver_name").text(driver.name);
            $("#driver_license").text(driver.license);
            $("#driver_phone").text(driver.phone_no);
            $("#stage2").removeClass('hidden');
            $("#stage1").addClass('hidden');
        });

    });


    function goBack() {
        window.location = "give_take_ride.html"
    }
    </script>
</head>

<body>
    <div class='container'>
        <div id='stage1'>
            <!-- The waiting screen when page loads -->

            <h1 align="center">Request Processing...</h1>

            <img class="media-object" src="requestprocess.jpg" height='200' width='200' />

            <a href="give_take_ride.html">
                <button class="btn btn-default btn-lg" onClick="goBack()">Back</button>
            </a>
        </div>

        <div id='stage2' class='hidden'>
            <!-- Showing the detials of the driver assigned -->

            <h1 align="center">Your ride on its way...</h1>

            <p>
                <strong id='driver_name'></strong>has agreed to give you a ride whose license no. is
                <strong id='driver_license'></strong>and will be with you in approximately 10 minutes. You can reach him / her at
                <strong id='driver_phone'></strong>
            </p>

            <!-- Clicking this button exchange the tokens -->
            <button id='finish_ride' class='btn btn-success'>Finish Ride</button>
        </div>
    </div>
</body>

</html>
